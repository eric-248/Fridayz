{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\lrmir\\\\OneDrive\\\\Desktop\\\\cs35L\\\\newFridayz\\\\Fridayz\\\\frontend\\\\src\\\\HomePage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport Posts from \"./Posts\";\nimport Beans from \"./Beans\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst HomePage = () => {\n  _s();\n  const [beans, setBeans] = useState([]);\n  const [posts, setPosts] = useState([]);\n  const [showPosts, setShowPosts] = useState(true);\n  const [user, setUser] = useState(null); // State to store user profile\n\n  useEffect(() => {\n    fetchUserProfile(); // Fetch user profile on component mount\n    fetchBeans();\n    fetchPosts();\n  }, []);\n  const fetchUserProfile = async () => {\n    try {\n      const token = localStorage.getItem(\"token\");\n      const response = await axios.get(\"http://localhost:5050/api/users/profile\", {\n        headers: {\n          Authorization: token // Include JWT token in the Authorization header\n        }\n      });\n      setUser(response.data); // Update user state with profile data\n    } catch (error) {\n      console.error(\"Error fetching user profile:\", error);\n    }\n  };\n  const fetchBeans = async () => {\n    try {\n      const response = await axios.get(\"http://localhost:5050/api/beans\");\n      setBeans(response.data);\n    } catch (error) {\n      console.error(\"Error fetching beans:\", error);\n    }\n  };\n  const fetchPosts = async () => {\n    try {\n      const response = await axios.get(\"http://localhost:5050/api/posts\");\n      setPosts(response.data);\n    } catch (error) {\n      console.error(\"Error fetching posts:\", error);\n    }\n  };\n  const handlePostBeans = async () => {\n    try {\n      const token = localStorage.getItem(\"token\");\n      const response = await axios.post(\"http://localhost:5050/api/posts\", {\n        comments: [],\n        likes: 0,\n        beans: beans.map(bean => bean._id),\n        // Use bean IDs from the fetched beans\n        toBePosted: new Date(),\n        username: user.username // Use the username from the fetched user profile\n      }, {\n        headers: {\n          Authorization: token,\n          // Include JWT token in the Authorization header\n          \"Content-Type\": \"application/json\"\n        }\n      });\n      console.log(\"Post created:\", response.data);\n      setShowPosts(true); // Show posts after posting beans\n    } catch (error) {\n      console.error(\"Error posting beans:\", error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [!!user && /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: [\"Hi \", user.username, \"!\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 18\n    }, this), !user && /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Please log in or register!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(Beans, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handlePostBeans,\n        children: \"It's Friday!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this), !!user && showPosts && /*#__PURE__*/_jsxDEV(Posts, {\n      posts: posts\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 31\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 5\n  }, this);\n};\n_s(HomePage, \"LcdWycUYGBqvsQfeIXtDI1wxm60=\");\n_c = HomePage;\nexport default HomePage;\nvar _c;\n$RefreshReg$(_c, \"HomePage\");","map":{"version":3,"names":["React","useState","useEffect","axios","Posts","Beans","jsxDEV","_jsxDEV","HomePage","_s","beans","setBeans","posts","setPosts","showPosts","setShowPosts","user","setUser","fetchUserProfile","fetchBeans","fetchPosts","token","localStorage","getItem","response","get","headers","Authorization","data","error","console","handlePostBeans","post","comments","likes","map","bean","_id","toBePosted","Date","username","log","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","_c","$RefreshReg$"],"sources":["C:/Users/lrmir/OneDrive/Desktop/cs35L/newFridayz/Fridayz/frontend/src/HomePage.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport Posts from \"./Posts\";\r\nimport Beans from \"./Beans\";\r\n\r\nconst HomePage = () => {\r\n  const [beans, setBeans] = useState([]);\r\n  const [posts, setPosts] = useState([]);\r\n  const [showPosts, setShowPosts] = useState(true);\r\n  const [user, setUser] = useState(null); // State to store user profile\r\n\r\n  useEffect(() => {\r\n    fetchUserProfile(); // Fetch user profile on component mount\r\n    fetchBeans();\r\n    fetchPosts();\r\n  }, []);\r\n\r\n  const fetchUserProfile = async () => {\r\n    try {\r\n      const token = localStorage.getItem(\"token\");\r\n      const response = await axios.get(\r\n        \"http://localhost:5050/api/users/profile\",\r\n        {\r\n          headers: {\r\n            Authorization: token, // Include JWT token in the Authorization header\r\n          },\r\n        }\r\n      );\r\n      setUser(response.data); // Update user state with profile data\r\n    } catch (error) {\r\n      console.error(\"Error fetching user profile:\", error);\r\n    }\r\n  };\r\n\r\n  const fetchBeans = async () => {\r\n    try {\r\n      const response = await axios.get(\"http://localhost:5050/api/beans\");\r\n      setBeans(response.data);\r\n    } catch (error) {\r\n      console.error(\"Error fetching beans:\", error);\r\n    }\r\n  };\r\n\r\n  const fetchPosts = async () => {\r\n    try {\r\n      const response = await axios.get(\"http://localhost:5050/api/posts\");\r\n      setPosts(response.data);\r\n    } catch (error) {\r\n      console.error(\"Error fetching posts:\", error);\r\n    }\r\n  };\r\n\r\n  const handlePostBeans = async () => {\r\n    try {\r\n      const token = localStorage.getItem(\"token\");\r\n      const response = await axios.post(\r\n        \"http://localhost:5050/api/posts\",\r\n        {\r\n          comments: [],\r\n          likes: 0,\r\n          beans: beans.map((bean) => bean._id), // Use bean IDs from the fetched beans\r\n          toBePosted: new Date(),\r\n          username: user.username, // Use the username from the fetched user profile\r\n        },\r\n        {\r\n          headers: {\r\n            Authorization: token, // Include JWT token in the Authorization header\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n        }\r\n      );\r\n      console.log(\"Post created:\", response.data);\r\n      setShowPosts(true); // Show posts after posting beans\r\n    } catch (error) {\r\n      console.error(\"Error posting beans:\", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {!!user && <h1>Hi {user.username}!</h1>}\r\n      {!user && <h1>Please log in or register!</h1>}\r\n      <Beans />\r\n      <div>\r\n        <button onClick={handlePostBeans}>It's Friday!</button>\r\n      </div>\r\n      {!!user && showPosts && <Posts posts={posts} />}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HomePage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}