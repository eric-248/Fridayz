{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Collection = void 0;\nconst bson_1 = require(\"./bson\");\nconst ordered_1 = require(\"./bulk/ordered\");\nconst unordered_1 = require(\"./bulk/unordered\");\nconst change_stream_1 = require(\"./change_stream\");\nconst aggregation_cursor_1 = require(\"./cursor/aggregation_cursor\");\nconst find_cursor_1 = require(\"./cursor/find_cursor\");\nconst list_indexes_cursor_1 = require(\"./cursor/list_indexes_cursor\");\nconst list_search_indexes_cursor_1 = require(\"./cursor/list_search_indexes_cursor\");\nconst error_1 = require(\"./error\");\nconst bulk_write_1 = require(\"./operations/bulk_write\");\nconst count_1 = require(\"./operations/count\");\nconst count_documents_1 = require(\"./operations/count_documents\");\nconst delete_1 = require(\"./operations/delete\");\nconst distinct_1 = require(\"./operations/distinct\");\nconst drop_1 = require(\"./operations/drop\");\nconst estimated_document_count_1 = require(\"./operations/estimated_document_count\");\nconst execute_operation_1 = require(\"./operations/execute_operation\");\nconst find_and_modify_1 = require(\"./operations/find_and_modify\");\nconst indexes_1 = require(\"./operations/indexes\");\nconst insert_1 = require(\"./operations/insert\");\nconst is_capped_1 = require(\"./operations/is_capped\");\nconst options_operation_1 = require(\"./operations/options_operation\");\nconst rename_1 = require(\"./operations/rename\");\nconst create_1 = require(\"./operations/search_indexes/create\");\nconst drop_2 = require(\"./operations/search_indexes/drop\");\nconst update_1 = require(\"./operations/search_indexes/update\");\nconst update_2 = require(\"./operations/update\");\nconst read_concern_1 = require(\"./read_concern\");\nconst read_preference_1 = require(\"./read_preference\");\nconst utils_1 = require(\"./utils\");\nconst write_concern_1 = require(\"./write_concern\");\n/**\n * The **Collection** class is an internal class that embodies a MongoDB collection\n * allowing for insert/find/update/delete and other command operation on that MongoDB collection.\n *\n * **COLLECTION Cannot directly be instantiated**\n * @public\n *\n * @example\n * ```ts\n * import { MongoClient } from 'mongodb';\n *\n * interface Pet {\n *   name: string;\n *   kind: 'dog' | 'cat' | 'fish';\n * }\n *\n * const client = new MongoClient('mongodb://localhost:27017');\n * const pets = client.db().collection<Pet>('pets');\n *\n * const petCursor = pets.find();\n *\n * for await (const pet of petCursor) {\n *   console.log(`${pet.name} is a ${pet.kind}!`);\n * }\n * ```\n */\nclass Collection {\n  /**\n   * Create a new Collection instance\n   * @internal\n   */\n  constructor(db, name, options) {\n    // Internal state\n    this.s = {\n      db,\n      options,\n      namespace: new utils_1.MongoDBCollectionNamespace(db.databaseName, name),\n      pkFactory: db.options?.pkFactory ?? utils_1.DEFAULT_PK_FACTORY,\n      readPreference: read_preference_1.ReadPreference.fromOptions(options),\n      bsonOptions: (0, bson_1.resolveBSONOptions)(options, db),\n      readConcern: read_concern_1.ReadConcern.fromOptions(options),\n      writeConcern: write_concern_1.WriteConcern.fromOptions(options)\n    };\n    this.client = db.client;\n  }\n  /**\n   * The name of the database this collection belongs to\n   */\n  get dbName() {\n    return this.s.namespace.db;\n  }\n  /**\n   * The name of this collection\n   */\n  get collectionName() {\n    return this.s.namespace.collection;\n  }\n  /**\n   * The namespace of this collection, in the format `${this.dbName}.${this.collectionName}`\n   */\n  get namespace() {\n    return this.fullNamespace.toString();\n  }\n  /**\n   *  @internal\n   *\n   * The `MongoDBNamespace` for the collection.\n   */\n  get fullNamespace() {\n    return this.s.namespace;\n  }\n  /**\n   * The current readConcern of the collection. If not explicitly defined for\n   * this collection, will be inherited from the parent DB\n   */\n  get readConcern() {\n    if (this.s.readConcern == null) {\n      return this.s.db.readConcern;\n    }\n    return this.s.readConcern;\n  }\n  /**\n   * The current readPreference of the collection. If not explicitly defined for\n   * this collection, will be inherited from the parent DB\n   */\n  get readPreference() {\n    if (this.s.readPreference == null) {\n      return this.s.db.readPreference;\n    }\n    return this.s.readPreference;\n  }\n  get bsonOptions() {\n    return this.s.bsonOptions;\n  }\n  /**\n   * The current writeConcern of the collection. If not explicitly defined for\n   * this collection, will be inherited from the parent DB\n   */\n  get writeConcern() {\n    if (this.s.writeConcern == null) {\n      return this.s.db.writeConcern;\n    }\n    return this.s.writeConcern;\n  }\n  /** The current index hint for the collection */\n  get hint() {\n    return this.s.collectionHint;\n  }\n  set hint(v) {\n    this.s.collectionHint = (0, utils_1.normalizeHintField)(v);\n  }\n  /**\n   * Inserts a single document into MongoDB. If documents passed in do not contain the **_id** field,\n   * one will be added to each of the documents missing it by the driver, mutating the document. This behavior\n   * can be overridden by setting the **forceServerObjectId** flag.\n   *\n   * @param doc - The document to insert\n   * @param options - Optional settings for the command\n   */\n  async insertOne(doc, options) {\n    return (0, execute_operation_1.executeOperation)(this.client, new insert_1.InsertOneOperation(this, doc, (0, utils_1.resolveOptions)(this, options)));\n  }\n  /**\n   * Inserts an array of documents into MongoDB. If documents passed in do not contain the **_id** field,\n   * one will be added to each of the documents missing it by the driver, mutating the document. This behavior\n   * can be overridden by setting the **forceServerObjectId** flag.\n   *\n   * @param docs - The documents to insert\n   * @param options - Optional settings for the command\n   */\n  async insertMany(docs, options) {\n    return (0, execute_operation_1.executeOperation)(this.client, new insert_1.InsertManyOperation(this, docs, (0, utils_1.resolveOptions)(this, options ?? {\n      ordered: true\n    })));\n  }\n  /**\n   * Perform a bulkWrite operation without a fluent API\n   *\n   * Legal operation types are\n   * - `insertOne`\n   * - `replaceOne`\n   * - `updateOne`\n   * - `updateMany`\n   * - `deleteOne`\n   * - `deleteMany`\n   *\n   * If documents passed in do not contain the **_id** field,\n   * one will be added to each of the documents missing it by the driver, mutating the document. This behavior\n   * can be overridden by setting the **forceServerObjectId** flag.\n   *\n   * @param operations - Bulk operations to perform\n   * @param options - Optional settings for the command\n   * @throws MongoDriverError if operations is not an array\n   */\n  async bulkWrite(operations, options) {\n    if (!Array.isArray(operations)) {\n      throw new error_1.MongoInvalidArgumentError('Argument \"operations\" must be an array of documents');\n    }\n    return (0, execute_operation_1.executeOperation)(this.client, new bulk_write_1.BulkWriteOperation(this, operations, (0, utils_1.resolveOptions)(this, options ?? {\n      ordered: true\n    })));\n  }\n  /**\n   * Update a single document in a collection\n   *\n   * @param filter - The filter used to select the document to update\n   * @param update - The update operations to be applied to the document\n   * @param options - Optional settings for the command\n   */\n  async updateOne(filter, update, options) {\n    return (0, execute_operation_1.executeOperation)(this.client, new update_2.UpdateOneOperation(this, filter, update, (0, utils_1.resolveOptions)(this, options)));\n  }\n  /**\n   * Replace a document in a collection with another document\n   *\n   * @param filter - The filter used to select the document to replace\n   * @param replacement - The Document that replaces the matching document\n   * @param options - Optional settings for the command\n   */\n  async replaceOne(filter, replacement, options) {\n    return (0, execute_operation_1.executeOperation)(this.client, new update_2.ReplaceOneOperation(this, filter, replacement, (0, utils_1.resolveOptions)(this, options)));\n  }\n  /**\n   * Update multiple documents in a collection\n   *\n   * @param filter - The filter used to select the documents to update\n   * @param update - The update operations to be applied to the documents\n   * @param options - Optional settings for the command\n   */\n  async updateMany(filter, update, options) {\n    return (0, execute_operation_1.executeOperation)(this.client, new update_2.UpdateManyOperation(this, filter, update, (0, utils_1.resolveOptions)(this, options)));\n  }\n  /**\n   * Delete a document from a collection\n   *\n   * @param filter - The filter used to select the document to remove\n   * @param options - Optional settings for the command\n   */\n  async deleteOne(filter = {}, options = {}) {\n    return (0, execute_operation_1.executeOperation)(this.client, new delete_1.DeleteOneOperation(this, filter, (0, utils_1.resolveOptions)(this, options)));\n  }\n  /**\n   * Delete multiple documents from a collection\n   *\n   * @param filter - The filter used to select the documents to remove\n   * @param options - Optional settings for the command\n   */\n  async deleteMany(filter = {}, options = {}) {\n    return (0, execute_operation_1.executeOperation)(this.client, new delete_1.DeleteManyOperation(this, filter, (0, utils_1.resolveOptions)(this, options)));\n  }\n  /**\n   * Rename the collection.\n   *\n   * @remarks\n   * This operation does not inherit options from the Db or MongoClient.\n   *\n   * @param newName - New name of of the collection.\n   * @param options - Optional settings for the command\n   */\n  async rename(newName, options) {\n    // Intentionally, we do not inherit options from parent for this operation.\n    return (0, execute_operation_1.executeOperation)(this.client, new rename_1.RenameOperation(this, newName, {\n      ...options,\n      readPreference: read_preference_1.ReadPreference.PRIMARY\n    }));\n  }\n  /**\n   * Drop the collection from the database, removing it permanently. New accesses will create a new collection.\n   *\n   * @param options - Optional settings for the command\n   */\n  async drop(options) {\n    return (0, execute_operation_1.executeOperation)(this.client, new drop_1.DropCollectionOperation(this.s.db, this.collectionName, options));\n  }\n  async findOne(filter = {}, options = {}) {\n    const cursor = this.find(filter, options).limit(-1).batchSize(1);\n    const res = await cursor.next();\n    await cursor.close();\n    return res;\n  }\n  find(filter = {}, options = {}) {\n    return new find_cursor_1.FindCursor(this.client, this.s.namespace, filter, (0, utils_1.resolveOptions)(this, options));\n  }\n  /**\n   * Returns the options of the collection.\n   *\n   * @param options - Optional settings for the command\n   */\n  async options(options) {\n    return (0, execute_operation_1.executeOperation)(this.client, new options_operation_1.OptionsOperation(this, (0, utils_1.resolveOptions)(this, options)));\n  }\n  /**\n   * Returns if the collection is a capped collection\n   *\n   * @param options - Optional settings for the command\n   */\n  async isCapped(options) {\n    return (0, execute_operation_1.executeOperation)(this.client, new is_capped_1.IsCappedOperation(this, (0, utils_1.resolveOptions)(this, options)));\n  }\n  /**\n   * Creates an index on the db and collection collection.\n   *\n   * @param indexSpec - The field name or index specification to create an index for\n   * @param options - Optional settings for the command\n   *\n   * @example\n   * ```ts\n   * const collection = client.db('foo').collection('bar');\n   *\n   * await collection.createIndex({ a: 1, b: -1 });\n   *\n   * // Alternate syntax for { c: 1, d: -1 } that ensures order of indexes\n   * await collection.createIndex([ [c, 1], [d, -1] ]);\n   *\n   * // Equivalent to { e: 1 }\n   * await collection.createIndex('e');\n   *\n   * // Equivalent to { f: 1, g: 1 }\n   * await collection.createIndex(['f', 'g'])\n   *\n   * // Equivalent to { h: 1, i: -1 }\n   * await collection.createIndex([ { h: 1 }, { i: -1 } ]);\n   *\n   * // Equivalent to { j: 1, k: -1, l: 2d }\n   * await collection.createIndex(['j', ['k', -1], { l: '2d' }])\n   * ```\n   */\n  async createIndex(indexSpec, options) {\n    return (0, execute_operation_1.executeOperation)(this.client, new indexes_1.CreateIndexOperation(this, this.collectionName, indexSpec, (0, utils_1.resolveOptions)(this, options)));\n  }\n  /**\n   * Creates multiple indexes in the collection, this method is only supported for\n   * MongoDB 2.6 or higher. Earlier version of MongoDB will throw a command not supported\n   * error.\n   *\n   * **Note**: Unlike {@link Collection#createIndex| createIndex}, this function takes in raw index specifications.\n   * Index specifications are defined {@link https://www.mongodb.com/docs/manual/reference/command/createIndexes/| here}.\n   *\n   * @param indexSpecs - An array of index specifications to be created\n   * @param options - Optional settings for the command\n   *\n   * @example\n   * ```ts\n   * const collection = client.db('foo').collection('bar');\n   * await collection.createIndexes([\n   *   // Simple index on field fizz\n   *   {\n   *     key: { fizz: 1 },\n   *   }\n   *   // wildcard index\n   *   {\n   *     key: { '$**': 1 }\n   *   },\n   *   // named index on darmok and jalad\n   *   {\n   *     key: { darmok: 1, jalad: -1 }\n   *     name: 'tanagra'\n   *   }\n   * ]);\n   * ```\n   */\n  async createIndexes(indexSpecs, options) {\n    return (0, execute_operation_1.executeOperation)(this.client, new indexes_1.CreateIndexesOperation(this, this.collectionName, indexSpecs, (0, utils_1.resolveOptions)(this, {\n      ...options,\n      maxTimeMS: undefined\n    })));\n  }\n  /**\n   * Drops an index from this collection.\n   *\n   * @param indexName - Name of the index to drop.\n   * @param options - Optional settings for the command\n   */\n  async dropIndex(indexName, options) {\n    return (0, execute_operation_1.executeOperation)(this.client, new indexes_1.DropIndexOperation(this, indexName, {\n      ...(0, utils_1.resolveOptions)(this, options),\n      readPreference: read_preference_1.ReadPreference.primary\n    }));\n  }\n  /**\n   * Drops all indexes from this collection.\n   *\n   * @param options - Optional settings for the command\n   */\n  async dropIndexes(options) {\n    try {\n      await (0, execute_operation_1.executeOperation)(this.client, new indexes_1.DropIndexOperation(this, '*', (0, utils_1.resolveOptions)(this, options)));\n      return true;\n    } catch {\n      return false;\n    }\n  }\n  /**\n   * Get the list of all indexes information for the collection.\n   *\n   * @param options - Optional settings for the command\n   */\n  listIndexes(options) {\n    return new list_indexes_cursor_1.ListIndexesCursor(this, (0, utils_1.resolveOptions)(this, options));\n  }\n  /**\n   * Checks if one or more indexes exist on the collection, fails on first non-existing index\n   *\n   * @param indexes - One or more index names to check.\n   * @param options - Optional settings for the command\n   */\n  async indexExists(indexes, options) {\n    return (0, execute_operation_1.executeOperation)(this.client, new indexes_1.IndexExistsOperation(this, indexes, (0, utils_1.resolveOptions)(this, options)));\n  }\n  /**\n   * Retrieves this collections index info.\n   *\n   * @param options - Optional settings for the command\n   */\n  async indexInformation(options) {\n    return (0, execute_operation_1.executeOperation)(this.client, new indexes_1.IndexInformationOperation(this.s.db, this.collectionName, (0, utils_1.resolveOptions)(this, options)));\n  }\n  /**\n   * Gets an estimate of the count of documents in a collection using collection metadata.\n   * This will always run a count command on all server versions.\n   *\n   * due to an oversight in versions 5.0.0-5.0.8 of MongoDB, the count command,\n   * which estimatedDocumentCount uses in its implementation, was not included in v1 of\n   * the Stable API, and so users of the Stable API with estimatedDocumentCount are\n   * recommended to upgrade their server version to 5.0.9+ or set apiStrict: false to avoid\n   * encountering errors.\n   *\n   * @see {@link https://www.mongodb.com/docs/manual/reference/command/count/#behavior|Count: Behavior}\n   * @param options - Optional settings for the command\n   */\n  async estimatedDocumentCount(options) {\n    return (0, execute_operation_1.executeOperation)(this.client, new estimated_document_count_1.EstimatedDocumentCountOperation(this, (0, utils_1.resolveOptions)(this, options)));\n  }\n  /**\n   * Gets the number of documents matching the filter.\n   * For a fast count of the total documents in a collection see {@link Collection#estimatedDocumentCount| estimatedDocumentCount}.\n   * **Note**: When migrating from {@link Collection#count| count} to {@link Collection#countDocuments| countDocuments}\n   * the following query operators must be replaced:\n   *\n   * | Operator | Replacement |\n   * | -------- | ----------- |\n   * | `$where`   | [`$expr`][1] |\n   * | `$near`    | [`$geoWithin`][2] with [`$center`][3] |\n   * | `$nearSphere` | [`$geoWithin`][2] with [`$centerSphere`][4] |\n   *\n   * [1]: https://www.mongodb.com/docs/manual/reference/operator/query/expr/\n   * [2]: https://www.mongodb.com/docs/manual/reference/operator/query/geoWithin/\n   * [3]: https://www.mongodb.com/docs/manual/reference/operator/query/center/#op._S_center\n   * [4]: https://www.mongodb.com/docs/manual/reference/operator/query/centerSphere/#op._S_centerSphere\n   *\n   * @param filter - The filter for the count\n   * @param options - Optional settings for the command\n   *\n   * @see https://www.mongodb.com/docs/manual/reference/operator/query/expr/\n   * @see https://www.mongodb.com/docs/manual/reference/operator/query/geoWithin/\n   * @see https://www.mongodb.com/docs/manual/reference/operator/query/center/#op._S_center\n   * @see https://www.mongodb.com/docs/manual/reference/operator/query/centerSphere/#op._S_centerSphere\n   */\n  async countDocuments(filter = {}, options = {}) {\n    return (0, execute_operation_1.executeOperation)(this.client, new count_documents_1.CountDocumentsOperation(this, filter, (0, utils_1.resolveOptions)(this, options)));\n  }\n  async distinct(key, filter = {}, options = {}) {\n    return (0, execute_operation_1.executeOperation)(this.client, new distinct_1.DistinctOperation(this, key, filter, (0, utils_1.resolveOptions)(this, options)));\n  }\n  /**\n   * Retrieve all the indexes on the collection.\n   *\n   * @param options - Optional settings for the command\n   */\n  async indexes(options) {\n    return (0, execute_operation_1.executeOperation)(this.client, new indexes_1.IndexesOperation(this, (0, utils_1.resolveOptions)(this, options)));\n  }\n  async findOneAndDelete(filter, options) {\n    return (0, execute_operation_1.executeOperation)(this.client, new find_and_modify_1.FindOneAndDeleteOperation(this, filter, (0, utils_1.resolveOptions)(this, options)));\n  }\n  async findOneAndReplace(filter, replacement, options) {\n    return (0, execute_operation_1.executeOperation)(this.client, new find_and_modify_1.FindOneAndReplaceOperation(this, filter, replacement, (0, utils_1.resolveOptions)(this, options)));\n  }\n  async findOneAndUpdate(filter, update, options) {\n    return (0, execute_operation_1.executeOperation)(this.client, new find_and_modify_1.FindOneAndUpdateOperation(this, filter, update, (0, utils_1.resolveOptions)(this, options)));\n  }\n  /**\n   * Execute an aggregation framework pipeline against the collection, needs MongoDB \\>= 2.2\n   *\n   * @param pipeline - An array of aggregation pipelines to execute\n   * @param options - Optional settings for the command\n   */\n  aggregate(pipeline = [], options) {\n    if (!Array.isArray(pipeline)) {\n      throw new error_1.MongoInvalidArgumentError('Argument \"pipeline\" must be an array of aggregation stages');\n    }\n    return new aggregation_cursor_1.AggregationCursor(this.client, this.s.namespace, pipeline, (0, utils_1.resolveOptions)(this, options));\n  }\n  /**\n   * Create a new Change Stream, watching for new changes (insertions, updates, replacements, deletions, and invalidations) in this collection.\n   *\n   * @remarks\n   * watch() accepts two generic arguments for distinct use cases:\n   * - The first is to override the schema that may be defined for this specific collection\n   * - The second is to override the shape of the change stream document entirely, if it is not provided the type will default to ChangeStreamDocument of the first argument\n   * @example\n   * By just providing the first argument I can type the change to be `ChangeStreamDocument<{ _id: number }>`\n   * ```ts\n   * collection.watch<{ _id: number }>()\n   *   .on('change', change => console.log(change._id.toFixed(4)));\n   * ```\n   *\n   * @example\n   * Passing a second argument provides a way to reflect the type changes caused by an advanced pipeline.\n   * Here, we are using a pipeline to have MongoDB filter for insert changes only and add a comment.\n   * No need start from scratch on the ChangeStreamInsertDocument type!\n   * By using an intersection we can save time and ensure defaults remain the same type!\n   * ```ts\n   * collection\n   *   .watch<Schema, ChangeStreamInsertDocument<Schema> & { comment: string }>([\n   *     { $addFields: { comment: 'big changes' } },\n   *     { $match: { operationType: 'insert' } }\n   *   ])\n   *   .on('change', change => {\n   *     change.comment.startsWith('big');\n   *     change.operationType === 'insert';\n   *     // No need to narrow in code because the generics did that for us!\n   *     expectType<Schema>(change.fullDocument);\n   *   });\n   * ```\n   *\n   * @param pipeline - An array of {@link https://www.mongodb.com/docs/manual/reference/operator/aggregation-pipeline/|aggregation pipeline stages} through which to pass change stream documents. This allows for filtering (using $match) and manipulating the change stream documents.\n   * @param options - Optional settings for the command\n   * @typeParam TLocal - Type of the data being detected by the change stream\n   * @typeParam TChange - Type of the whole change stream document emitted\n   */\n  watch(pipeline = [], options = {}) {\n    // Allow optionally not specifying a pipeline\n    if (!Array.isArray(pipeline)) {\n      options = pipeline;\n      pipeline = [];\n    }\n    return new change_stream_1.ChangeStream(this, pipeline, (0, utils_1.resolveOptions)(this, options));\n  }\n  /**\n   * Initiate an Out of order batch write operation. All operations will be buffered into insert/update/remove commands executed out of order.\n   *\n   * @throws MongoNotConnectedError\n   * @remarks\n   * **NOTE:** MongoClient must be connected prior to calling this method due to a known limitation in this legacy implementation.\n   * However, `collection.bulkWrite()` provides an equivalent API that does not require prior connecting.\n   */\n  initializeUnorderedBulkOp(options) {\n    return new unordered_1.UnorderedBulkOperation(this, (0, utils_1.resolveOptions)(this, options));\n  }\n  /**\n   * Initiate an In order bulk write operation. Operations will be serially executed in the order they are added, creating a new operation for each switch in types.\n   *\n   * @throws MongoNotConnectedError\n   * @remarks\n   * **NOTE:** MongoClient must be connected prior to calling this method due to a known limitation in this legacy implementation.\n   * However, `collection.bulkWrite()` provides an equivalent API that does not require prior connecting.\n   */\n  initializeOrderedBulkOp(options) {\n    return new ordered_1.OrderedBulkOperation(this, (0, utils_1.resolveOptions)(this, options));\n  }\n  /**\n   * An estimated count of matching documents in the db to a filter.\n   *\n   * **NOTE:** This method has been deprecated, since it does not provide an accurate count of the documents\n   * in a collection. To obtain an accurate count of documents in the collection, use {@link Collection#countDocuments| countDocuments}.\n   * To obtain an estimated count of all documents in the collection, use {@link Collection#estimatedDocumentCount| estimatedDocumentCount}.\n   *\n   * @deprecated use {@link Collection#countDocuments| countDocuments} or {@link Collection#estimatedDocumentCount| estimatedDocumentCount} instead\n   *\n   * @param filter - The filter for the count.\n   * @param options - Optional settings for the command\n   */\n  async count(filter = {}, options = {}) {\n    return (0, execute_operation_1.executeOperation)(this.client, new count_1.CountOperation(this.fullNamespace, filter, (0, utils_1.resolveOptions)(this, options)));\n  }\n  listSearchIndexes(indexNameOrOptions, options) {\n    options = typeof indexNameOrOptions === 'object' ? indexNameOrOptions : options == null ? {} : options;\n    const indexName = indexNameOrOptions == null ? null : typeof indexNameOrOptions === 'object' ? null : indexNameOrOptions;\n    return new list_search_indexes_cursor_1.ListSearchIndexesCursor(this, indexName, options);\n  }\n  /**\n   * Creates a single search index for the collection.\n   *\n   * @param description - The index description for the new search index.\n   * @returns A promise that resolves to the name of the new search index.\n   *\n   * @remarks Only available when used against a 7.0+ Atlas cluster.\n   */\n  async createSearchIndex(description) {\n    const [index] = await this.createSearchIndexes([description]);\n    return index;\n  }\n  /**\n   * Creates multiple search indexes for the current collection.\n   *\n   * @param descriptions - An array of `SearchIndexDescription`s for the new search indexes.\n   * @returns A promise that resolves to an array of the newly created search index names.\n   *\n   * @remarks Only available when used against a 7.0+ Atlas cluster.\n   * @returns\n   */\n  async createSearchIndexes(descriptions) {\n    return (0, execute_operation_1.executeOperation)(this.client, new create_1.CreateSearchIndexesOperation(this, descriptions));\n  }\n  /**\n   * Deletes a search index by index name.\n   *\n   * @param name - The name of the search index to be deleted.\n   *\n   * @remarks Only available when used against a 7.0+ Atlas cluster.\n   */\n  async dropSearchIndex(name) {\n    return (0, execute_operation_1.executeOperation)(this.client, new drop_2.DropSearchIndexOperation(this, name));\n  }\n  /**\n   * Updates a search index by replacing the existing index definition with the provided definition.\n   *\n   * @param name - The name of the search index to update.\n   * @param definition - The new search index definition.\n   *\n   * @remarks Only available when used against a 7.0+ Atlas cluster.\n   */\n  async updateSearchIndex(name, definition) {\n    return (0, execute_operation_1.executeOperation)(this.client, new update_1.UpdateSearchIndexOperation(this, name, definition));\n  }\n}\nexports.Collection = Collection;","map":{"version":3,"names":["bson_1","require","ordered_1","unordered_1","change_stream_1","aggregation_cursor_1","find_cursor_1","list_indexes_cursor_1","list_search_indexes_cursor_1","error_1","bulk_write_1","count_1","count_documents_1","delete_1","distinct_1","drop_1","estimated_document_count_1","execute_operation_1","find_and_modify_1","indexes_1","insert_1","is_capped_1","options_operation_1","rename_1","create_1","drop_2","update_1","update_2","read_concern_1","read_preference_1","utils_1","write_concern_1","Collection","constructor","db","name","options","s","namespace","MongoDBCollectionNamespace","databaseName","pkFactory","DEFAULT_PK_FACTORY","readPreference","ReadPreference","fromOptions","bsonOptions","resolveBSONOptions","readConcern","ReadConcern","writeConcern","WriteConcern","client","dbName","collectionName","collection","fullNamespace","toString","hint","collectionHint","v","normalizeHintField","insertOne","doc","executeOperation","InsertOneOperation","resolveOptions","insertMany","docs","InsertManyOperation","ordered","bulkWrite","operations","Array","isArray","MongoInvalidArgumentError","BulkWriteOperation","updateOne","filter","update","UpdateOneOperation","replaceOne","replacement","ReplaceOneOperation","updateMany","UpdateManyOperation","deleteOne","DeleteOneOperation","deleteMany","DeleteManyOperation","rename","newName","RenameOperation","PRIMARY","drop","DropCollectionOperation","findOne","cursor","find","limit","batchSize","res","next","close","FindCursor","OptionsOperation","isCapped","IsCappedOperation","createIndex","indexSpec","CreateIndexOperation","createIndexes","indexSpecs","CreateIndexesOperation","maxTimeMS","undefined","dropIndex","indexName","DropIndexOperation","primary","dropIndexes","listIndexes","ListIndexesCursor","indexExists","indexes","IndexExistsOperation","indexInformation","IndexInformationOperation","estimatedDocumentCount","EstimatedDocumentCountOperation","countDocuments","CountDocumentsOperation","distinct","key","DistinctOperation","IndexesOperation","findOneAndDelete","FindOneAndDeleteOperation","findOneAndReplace","FindOneAndReplaceOperation","findOneAndUpdate","FindOneAndUpdateOperation","aggregate","pipeline","AggregationCursor","watch","ChangeStream","initializeUnorderedBulkOp","UnorderedBulkOperation","initializeOrderedBulkOp","OrderedBulkOperation","count","CountOperation","listSearchIndexes","indexNameOrOptions","ListSearchIndexesCursor","createSearchIndex","description","index","createSearchIndexes","descriptions","CreateSearchIndexesOperation","dropSearchIndex","DropSearchIndexOperation","updateSearchIndex","definition","UpdateSearchIndexOperation","exports"],"sources":["../src/collection.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}